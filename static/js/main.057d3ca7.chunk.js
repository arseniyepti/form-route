(this["webpackJsonpform-route"]=this["webpackJsonpform-route"]||[]).push([[0],{182:function(e,t,n){e.exports=n(266)},266:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),o=n.n(r),i=n(29),u=n.n(i),c=(n(187),n(27)),l=n(158),s=n(50),d=n(159),p=n(4),m=n(41),f=n(42),b=n(48),g=n(47),h=n(45),O=n(53),j=n(24),v=n.n(j),w=n(58),E=n(133),x=n(269),y=n(36),S=n(5),L=n(270),I=n(165),C=n.n(I).a.create({baseURL:"https://conduit.productionready.io/api",validateStatus:function(e){return e>=200&&e<300}}),U=Object(L.a)("AUTH_FETCH_SUCCESS"),k=Object(L.a)("AUTH_FETCH_FAILURE"),F=Object(L.a)("AUTH_FETCH_FINALLY"),_=Object(L.a)("REG_FETCH_SUCCESS"),P=Object(L.a)("REG_FETCH_FAILURE"),z=Object(L.a)("REG_FETCH_FINALLY"),T=n(55),A=T.a().shape({password:T.b().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),email:T.b().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")}),R=T.a().shape({name:T.b().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),password:T.b().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),email:T.b().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")});function H(){var e=Object(a.a)(["\n  display: flex;\n  width: 400px;\n  justify-content: space-between;\n  align-items: center;\n"]);return H=function(){return e},e}function N(){var e=Object(a.a)(["\n  font-size: 25px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return N=function(){return e},e}function q(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return q=function(){return e},e}function G(){var e=Object(a.a)(["\n  display: flex;\n  height: 220px;\n  max-width: 400px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-around;\n"]);return G=function(){return e},e}function V(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return V=function(){return e},e}function D(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return D=function(){return e},e}function J(){var e=Object(a.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  width: 100px;\n"]);return J=function(){return e},e}function X(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 500px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n"]);return X=function(){return e},e}var Y={setAuthState:function(e,t){var n=Object.assign({},t);return function(){var e=Object(w.a)(v.a.mark((function e(t){var a,r,o,i,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users/login",e.prev=1,e.next=4,C.post("/users/login",{user:Object(S.a)({},n)});case 4:return a=e.sent,r=a.data.user,o=r.token,i=r.username,localStorage.setItem("token",o),localStorage.setItem("username",i),t(U({isLogged:!0})),e.abrupt("return",!0);case 12:e.prev=12,e.t0=e.catch(1),u=e.t0.response.data.errors["email or password"],t(k({emailOrPassword:u,authorization:!1}));case 16:return e.prev=16,t(F({loading:!1})),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(t){return e.apply(this,arguments)}}()},fetchAuthorizationFinally:F},B=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.history,r=t.emailOrPassword;return o.a.createElement(y.b,{initialValues:{password:"",email:""},validationSchema:A,onSubmit:function(){var t=Object(w.a)(v.a.mark((function t(n,r){var o,i,u,c,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.email,i=n.password,u=r.resetForm,c=e.props,l=c.setAuthState,(0,c.fetchAuthorizationFinally)({loading:!0}),t.next=6,l(a,{email:o,password:i});case 6:t.sent&&(u(),a.push("/form-route/"));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.errors,i=e.touched,u=e.handleChange,c=e.setFieldTouched,l=e.handleSubmit;return o.a.createElement(M,null,o.a.createElement($,{onSubmit:l},o.a.createElement(ne,null,"Email",o.a.createElement(te,null,"*"),o.a.createElement(y.a,{onPressEnter:l,onChange:function(e){c("email"),u(e)},value:t.email,name:"email",id:"email",type:"email",component:W})),i.email&&a.email||o.a.createElement("div",null,"\xa0"),o.a.createElement(ne,null,"Password",o.a.createElement(te,null,"*"),o.a.createElement(y.a,{onPressEnter:l,onChange:function(e){c("password"),u(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:Z})),i.password&&a.password||o.a.createElement("div",null,"\xa0"),o.a.createElement(Q,{onClick:l,loading:n},"Sign in"),r?o.a.createElement("div",null,"Email or password ".concat(r)):null,o.a.createElement(ee,{to:"/form-route/signup"},"Sign up")))}))}}]),n}(o.a.Component),K=Object(c.b)((function(e){var t=e.authState.isLogged,n=e.authState.UIState;return{isLogged:t,loading:n.loading,authorization:n.authorization,emailOrPassword:e.authState.errors.emailOrPassword}}),Y)(B),M=p.default.section(X()),Q=Object(p.default)(E.a)(J()),W=Object(p.default)(x.a)(D()),Z=Object(p.default)(x.a.Password)(V()),$=p.default.form(G()),ee=Object(p.default)(h.b)(q()),te=p.default.span(N()),ne=p.default.label(H());function ae(){var e=Object(a.a)(["\n  text-decoration: none;\n  position: absolute;\n  top: 20px;\n  right: 40px;\n"]);return ae=function(){return e},e}function re(){var e=Object(a.a)(["\n  text-transform: uppercase;\n  color: rgba(0, 13, 34, 0.72);\n"]);return re=function(){return e},e}function oe(){var e=Object(a.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n"]);return oe=function(){return e},e}var ie={fetchAuthorizationSuccess:U},ue=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){(0,e.props.fetchAuthorizationSuccess)({isLogged:!1})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.isLogged,t=localStorage.getItem("token"),n=localStorage.getItem("username");return!1!==e||t?o.a.createElement(le,null,o.a.createElement(se,null," Hi, ".concat(n,", I know It is you")),o.a.createElement(de,{onClick:this.handleLogOut,to:"/form-route/login"},"Logout")):o.a.createElement(O.a,{to:"/form-route/login"})}}]),n}(r.Component),ce=Object(c.b)((function(e){return{isLogged:e.authState.isLogged}}),ie)(ue),le=p.default.section(oe()),se=p.default.h2(re()),de=Object(p.default)(h.b)(ae());function pe(){var e=Object(a.a)(["\n  display: flex;\n  width: 400px;\n  justify-content: space-between;\n  align-items: center;\n"]);return pe=function(){return e},e}function me(){var e=Object(a.a)(["\n  font-size: 25px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return me=function(){return e},e}function fe(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return fe=function(){return e},e}function be(){var e=Object(a.a)(["\n  display: flex;\n  height: 300px;\n  max-width: 400px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-between;\n"]);return be=function(){return e},e}function ge(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return ge=function(){return e},e}function he(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return he=function(){return e},e}function Oe(){var e=Object(a.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n"]);return Oe=function(){return e},e}function je(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 500px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n"]);return je=function(){return e},e}var ve,we,Ee={setRegState:function(e,t,n){return function(){var a=Object(w.a)(v.a.mark((function a(r){var o,i,u,c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"/users",a.prev=1,a.next=4,C.post("/users",{user:{username:e,email:t,password:n}});case 4:return r(_({registration:!0})),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(1),o=a.t0.response.data.errors,i=o.email,u=o.password,c=o.username,r(P({email:i,password:u,username:c,registration:!1})),a.abrupt("return",!1);case 13:return a.prev=13,r(z({loading:!1})),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[1,8,13,16]])})));return function(e){return a.apply(this,arguments)}}()},fetchRegistrationFinally:z},xe=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.email,r=t.password,i=t.username,u=t.history;return o.a.createElement(y.b,{initialValues:{password:"",email:"",name:""},validationSchema:R,onSubmit:function(){var t=Object(w.a)(v.a.mark((function t(n,a){var r,o,i,c,l,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,o=n.email,i=n.password,c=a.resetForm,l=e.props,s=l.setRegState,(0,l.fetchRegistrationFinally)({loading:!0}),t.next=6,s(r,o,i);case 6:t.sent&&(c(),u.push("/form-route/login"));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,u=e.errors,c=e.touched,l=e.handleChange,s=e.setFieldTouched,d=e.handleSubmit;return o.a.createElement(Se,null,o.a.createElement(Ue,{onSubmit:d},o.a.createElement(_e,null,"Name",o.a.createElement(Fe,null,"*"),o.a.createElement(y.a,{onPressEnter:d,onChange:function(e){s("name"),l(e)},value:t.name,name:"name",id:"name",type:"text",component:Ie})),c.name&&u.name||null,i?o.a.createElement("div",{style:{marginLeft:"auto"}},"Name ".concat(i)):null,o.a.createElement(_e,null,"Email",o.a.createElement(Fe,null,"*"),o.a.createElement(y.a,{onPressEnter:d,onChange:function(e){s("email"),l(e)},value:t.email,name:"email",id:"email",type:"email",component:Ie})),c.email&&u.email||null,a?o.a.createElement("div",{style:{marginLeft:"auto"}},"Email ".concat(a)):null,o.a.createElement(_e,null,"Password",o.a.createElement(Fe,null,"*"),o.a.createElement(y.a,{onPressEnter:d,onChange:function(e){s("password"),l(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:Ce})),c.password&&u.password||null,r?o.a.createElement("div",{style:{marginLeft:"auto"}},"Password ".concat(r)):null,o.a.createElement(Le,{onClick:d,loading:n},"Sign up"),o.a.createElement(ke,{to:"/form-route/login"},"Sign in")))}))}}]),n}(o.a.Component),ye=Object(c.b)((function(e){var t=e.regState.UIState,n=t.registration,a=t.loading,r=e.regState.errors;return{registration:n,loading:a,email:r.email,password:r.password,username:r.username}}),Ee)(xe),Se=p.default.section(je()),Le=Object(p.default)(E.a)(Oe()),Ie=Object(p.default)(x.a)(he()),Ce=Object(p.default)(x.a.Password)(ge()),Ue=p.default.form(be()),ke=Object(p.default)(h.b)(fe()),Fe=p.default.span(me()),_e=p.default.label(pe()),Pe=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isLogged,n=e.history;return o.a.createElement(h.a,null,o.a.createElement(O.d,null,o.a.createElement(O.b,{history:n,exact:!0,path:"/form-route/",isLogged:t,component:ce}),o.a.createElement(O.b,{history:n,exact:!0,path:"/form-route/login",isLogged:t,component:K}),o.a.createElement(O.b,{history:n,exact:!0,path:"/form-route/signup",component:ye})))}}]),n}(o.a.Component),ze=Object(c.b)((function(e){return{isLogged:e.authState.isLogged}}))(Pe),Te=n(34),Ae=n(267),Re=Object(Ae.a)((ve={},Object(Te.a)(ve,U,(function(e,t){var n=t.payload.isLogged;return Object(S.a)(Object(S.a)({},e),{},{isLogged:n})})),Object(Te.a)(ve,k,(function(e,t){var n=t.payload,a=n.emailOrPassword,r=n.authorization;return Object(S.a)(Object(S.a)({},e),{},{UIState:Object(S.a)(Object(S.a)({},e.UIState),{},{authorization:r}),errors:{emailOrPassword:a}})})),Object(Te.a)(ve,F,(function(e,t){var n=t.payload.loading;return Object(S.a)(Object(S.a)({},e),{},{UIState:Object(S.a)(Object(S.a)({},e.UIState),{},{loading:n})})})),ve),{isLogged:!1,UIState:{loading:!1,authorization:!0},errors:{email:null,password:null}}),He=Object(Ae.a)((we={},Object(Te.a)(we,_,(function(e,t){var n=t.payload.registration;return Object(S.a)(Object(S.a)({},e),{},{UIState:Object(S.a)(Object(S.a)({},e.UIState),{},{registration:n})})})),Object(Te.a)(we,P,(function(e,t){var n=t.payload,a=n.email,r=n.password,o=n.username,i=n.registration;return Object(S.a)(Object(S.a)({},e),{},{UIState:Object(S.a)(Object(S.a)({},e.UIState),{},{registration:i}),errors:{email:a,password:r,username:o}})})),Object(Te.a)(we,z,(function(e,t){var n=t.payload.loading;return Object(S.a)(Object(S.a)({},e),{},{UIState:Object(S.a)(Object(S.a)({},e.UIState),{},{loading:n})})})),we),{UIState:{loading:!1},errors:{email:null,password:null,username:null}}),Ne=Object(s.c)({authState:Re,regState:He});function qe(){var e=Object(a.a)(["\n*{\n  box-sizing: border-box;\n}\n  body {\n    padding: 100px;\n    background-color: rgba(88,154,255,0.41);\n    font-size: 16px;\n    display:flex;\n    justify-content:center;\n  }\n"]);return qe=function(){return e},e}var Ge=Object(p.createGlobalStyle)(qe()),Ve=window.__REDUX_DEVTOOLS_EXTENSION__,De=Ve&&Ve(),Je=Object(s.e)(Ne,Object(s.d)(Object(s.a)(l.a),De));u.a.render(o.a.createElement(c.a,{store:Je},o.a.createElement(d.Normalize,null),o.a.createElement(Ge,null),o.a.createElement(ze,null)),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.057d3ca7.chunk.js.map