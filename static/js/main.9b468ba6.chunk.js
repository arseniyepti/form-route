(this["webpackJsonpform-route"]=this["webpackJsonpform-route"]||[]).push([[0],{255:function(e,t,n){e.exports=n(436)},436:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),c=n.n(r),i=n(7),o=n.n(i),u=(n(260),n(27)),l=n(23),s=n(218),f=n(76),d=n(219),p=n(3),m=n(36),b=n(37),h=n(44),g=n(41),v=n(444),O=n(81),j=n(9),x=n.n(j),E=n(19),w=n(448),y=n(441),S=n(446),A=function(){S.a.open({message:"Message from server",description:"Ooops, something wrong",duration:2})},C=function(e,t,n){return function(){v.a.confirm({icon:c.a.createElement(w.a,null),content:"Are you sure?",onOk:function(){var a=Object(E.a)(x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(e);case 2:return a.next=4,n();case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),onCancel:function(){}})}},k=function(e,t){return"failed"===t||e},F=function(e,t){return function(){return t(),k(!1,"failed"),e.push("/form-route/login")}},T=function(e){return function(){return k(!1,"failed"),e()}},_=function(e,t,n,a,r){return function(){return e?"add"===r?n.push("/form-route/add"):n.push("/form-route/".concat(a,"/edit")):t()}},U=n(79),R=n(445),P=n(440),L=n(22),z=n(181),I=n.n(z),H=n(447),q=n(230),D=n.n(q).a.create({baseURL:"https://conduit.productionready.io/api",validateStatus:function(e){return 401===e&&(console.log(8787),k(!0)),console.log(e),e>=200&&e<300}});D.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Token ".concat(t)),e}),(function(e){Promise.reject(e)}));var M=Object(H.a)("AUTH_FETCH_REQUEST"),V=Object(H.a)("AUTH_FETCH_SUCCESS"),B=Object(H.a)("AUTH_FETCH_FAILURE"),G=Object(H.a)("REG_FETCH_REQUEST"),N=Object(H.a)("REG_FETCH_FAILURE"),Q=Object(H.a)("REG_FETCH_SUCCESS"),Y=Object(H.a)("ARTICLES_FETCH_SUCCESS"),J=Object(H.a)("ARTICLES_FETCH_FAILURE"),X=Object(H.a)("FAVOURITE_FETCH_SUCCESS"),Z=Object(H.a)("FAVOURITE_FETCH_FAILURE"),W=Object(H.a)("ADD_FETCH_SUCCESS"),K=Object(H.a)("ADD_FETCH_FAILURE"),$=Object(H.a)("ADD_FETCH_REQUEST"),ee=Object(H.a)("UPDATE_FETCH_SUCCESS"),te=Object(H.a)("UPDATE_FETCH_FAILURE"),ne=Object(H.a)("UPDATE_FETCH_REQUEST"),ae=Object(H.a)("DELETE_FETCH_SUCCESS"),re=Object(H.a)("DELETE_FETCH_FAILURE"),ce=Object(H.a)("AUTH_STATE_SUCCESS"),ie=Object(H.a)("AUTH_STATE_FAILURE"),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(E.a)(x.a.mark((function t(n){var a,r,c,i,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/articles?limit=10&offset=".concat(e),t.prev=1,t.next=4,D.get(a);case 4:r=t.sent,c=r.data,i=c.articles,o=c.articlesCount,n(Y({articles:i,articlesCount:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(J());case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},ue=n(29),le=ue.a().shape({password:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),email:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e").typeError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445")}),se=ue.a().shape({name:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),password:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),repeatPassword:ue.c().oneOf([ue.b("password")],"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),email:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e").typeError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445")}),fe=ue.a().shape({title:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),description:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),body:ue.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")});function de(){var e=Object(a.a)(["\n  position: absolute;\n  top: 0;\n  right: -80px;\n  width: 70px;\n"]);return de=function(){return e},e}function pe(){var e=Object(a.a)([""]);return pe=function(){return e},e}function me(){var e=Object(a.a)(["\n  position: relative;\n  display: flex;\n  width: 420px;\n  justify-content: space-between;\n  align-items: baseline;\n"]);return me=function(){return e},e}function be(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return be=function(){return e},e}function he(){var e=Object(a.a)(["\n  display: flex;\n  max-width: 600px;\n  padding: 30px 0;\n  min-height: 450px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-around;\n"]);return he=function(){return e},e}function ge(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return ge=function(){return e},e}function ve(){var e=Object(a.a)(["\n  width: 300px;\n  margin-bottom: 10px;\n  display: flex;\n  align-self: flex-start;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(a.a)(["\n  font-size: 18px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return Oe=function(){return e},e}function je(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return je=function(){return e},e}function xe(){var e=Object(a.a)(["\n  width: 100px;\n  text-transform: uppercase;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(a.a)(["\n  width: 600px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return Ee=function(){return e},e}var we={fetchAddArticles:function(e,t){var n=e.title,a=e.description,r=e.body;return function(){var e=Object(E.a)(x.a.mark((function e(c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c($()),"/articles",e.prev=2,e.next=5,D.post("/articles",{article:{title:n,description:a,body:r,tagList:t}});case 5:c(W()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c(K(e.t0.response.status));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},fetchUpdateArticles:function(e,t,n){var a=e.title,r=e.description,c=e.body;return function(){var e=Object(E.a)(x.a.mark((function e(i){var o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(ne()),o="/articles/".concat(n),e.prev=2,e.next=5,D.put(o,{article:{title:a,description:r,body:c,tagList:t}});case 5:i(ee()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),i(te(e.t0.response.status));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},fetchAddArticleFailure:K,fetchAddArticleRequest:$,fetchUpdateArticleRequest:ne,fetchArticles:oe},ye=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).addIdToTagList=function(e){return 0===e.length?[]:e.map((function(e){return{tag:e,id:I()()}}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.fetchAddArticles,a=t.addArticlesFetchingState,r=t.updateArticlesFetchingState,i=t.fetchUpdateArticleRequest,o=t.fetchArticles,u=t.fetchAddArticleRequest,l=t.history,s=t.fetchUpdateArticles,f=this.props.article,d=void 0===f?"":f,p=d.slug,m=void 0===p?"":p,b=d.description,h=void 0===b?"":b,g=d.tagList,v=void 0===g?[]:g,O=d.title,j=void 0===O?"":O,w=d.body,y=void 0===w?"":w;return c.a.createElement(L.c,{initialValues:{title:j,description:h,body:y,tags:this.addIdToTagList(v)},validationSchema:fe,onSubmit:function(){var t=Object(E.a)(x.a.mark((function t(a){var r,c,f,p;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.tags.map((function(e){var t=e.tag,n=e.id;return a["tags".concat(n)]&&a["tags".concat(n)]!==t?a["tags".concat(n)]:t})).filter((function(e){return""!==e})),!d){t.next=7;break}return i(),t.next=5,s(a,r,m);case 5:t.next=10;break;case 7:return u(),t.next=10,n(a,r);case 10:return t.next=12,o();case 12:c=e.props,f=c.addArticlesFetchingState,p=c.updateArticlesFetchingState,"finished"===f&&l.push("/form-route/"),d&&"finished"===p&&l.goBack();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(t){var n=t.values,i=t.errors,o=t.touched,u=t.handleChange,l=t.setFieldValue,s=t.handleSubmit;return c.a.createElement(Ce,null,c.a.createElement(Re,{onSubmit:s},c.a.createElement(Le,null,"Title",c.a.createElement(Te,null,"*"),c.a.createElement(L.a,{onPressEnter:s,onChange:function(e){u(e)},value:n.title,name:"title",id:"title",type:"text",component:Fe})),o.title&&i.title||c.a.createElement("div",null,"\xa0"),c.a.createElement(Le,null,"Description",c.a.createElement(Te,null,"*"),c.a.createElement(L.a,{onPressEnter:s,onChange:function(e){u(e)},value:n.description,name:"description",id:"description",type:"text",component:Fe})),o.description&&i.description||c.a.createElement("div",null,"\xa0"),c.a.createElement(Le,null,"Text",c.a.createElement(Te,null,"*"),c.a.createElement(L.a,{autoSize:{minRows:2,maxRows:10},onPressEnter:s,onChange:function(e){u(e)},value:n.body,name:"body",id:"body",type:"text",cols:"20",rows:"10",component:Ue})),o.body&&i.body||c.a.createElement("div",null,"\xa0"),c.a.createElement(Le,null,"Tags",c.a.createElement(ze,null,c.a.createElement(L.b,{name:"tags",render:function(e){var t=function(){return l("tag",""),e.unshift({tag:n.tag,id:I()()})};return c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{onChange:u,onPressEnter:t,value:n.tag,name:"tag",id:"tag",type:"text",component:_e}),n.tags.map((function(e){var t=e.tag,a=e.id;return c.a.createElement(L.a,{key:a,defaultValue:t,value:n["tags".concat(a)],onChange:u,id:"tags".concat(a),name:"tags".concat(a),type:"text",component:_e})})),c.a.createElement(Ie,{type:"primary",onClick:t},"Add"))}}))),401===a?c.a.createElement("div",null,"You need to log in"):c.a.createElement("div",null,"\xa0"),c.a.createElement(ke,{loading:d?"request"===a:"request"===r,type:"primary",onClick:s},e.props.article?"Edit":"Add"),c.a.createElement(Pe,{to:"/form-route/"},"Main")))}))}}]),n}(c.a.Component),Se=Object(u.b)((function(e){return{addArticlesFetchingState:e.addArticlesFetchingState,updateArticlesFetchingState:e.updateArticlesFetchingState}}),we)(ye),Ae=Object(O.f)(Se),Ce=p.default.section(Ee()),ke=Object(p.default)(U.a)(xe()),Fe=Object(p.default)(R.a)(je()),Te=p.default.span(Oe()),_e=Object(p.default)(R.a)(ve()),Ue=Object(p.default)(R.a.TextArea)(ge()),Re=Object(p.default)(P.a)(he()),Pe=Object(p.default)(l.b)(be()),Le=p.default.label(me()),ze=p.default.div(pe()),Ie=Object(p.default)(U.a)(de()),He=n(449),qe=n(450),De=n(451),Me=n(452),Ve=n(453);function Be(){var e=Object(a.a)(["\n  display: ",";\n  width: 100px;\n  height: 30px;\n  margin-right: 5px;\n  background-color: ",";\n"]);return Be=function(){return e},e}function Ge(){var e=Object(a.a)(["\n  display: ",";\n  align-items: center;\n  justify-content: center;\n  height: 30px;\n  width: 50px;\n  font-size: 20px;\n"]);return Ge=function(){return e},e}function Ne(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return Ne=function(){return e},e}function Qe(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return Qe=function(){return e},e}function Ye(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return Ye=function(){return e},e}function Je(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Je=function(){return e},e}function Xe(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(a.a)(["\n  font-size: 18px;\n\n  &:hover {\n    animation: transform 0.3s ease;\n  }\n\n  @keyframes transform {\n    from {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.3);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n"]);return Ze=function(){return e},e}function We(){var e=Object(a.a)(["\n  width: 40px;\n  height: 30px;\n"]);return We=function(){return e},e}function Ke(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Ke=function(){return e},e}function $e(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 700px;\n  padding: 5px 10px;\n  background: rgba(88, 154, 255, 0.1);\n"]);return $e=function(){return e},e}function et(){var e=Object(a.a)(["\n  display: ",";\n  width: 700px;\n  padding: 20px 20px;\n  margin: 0;\n  word-wrap: break-word;\n  background: rgba(230, 243, 251, 0.72);\n"]);return et=function(){return e},e}function tt(){var e=Object(a.a)(["\n  display: ",";\n  color: rgba(5, 12, 22, 0.5);\n  width: 650px;\n  padding: 5px 20px;\n  margin: 0;\n  word-wrap: break-word;\n"]);return tt=function(){return e},e}function nt(){var e=Object(a.a)(["\n  color: rgba(5, 12, 22, 0.7);\n  font-weight: 600;\n  width: 530px;\n  padding: 5px 20px;\n  margin: 0;\n  word-wrap: break-word;\n"]);return nt=function(){return e},e}function at(){var e=Object(a.a)(["\n  display: flex;\n  padding-right: 20px;\n  justify-content: space-between;\n  width: 180px;\n"]);return at=function(){return e},e}function rt(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 700px;\n  border: 1px solid cornflowerblue;\n  background: rgba(88, 154, 255, 0.45);\n"]);return rt=function(){return e},e}function ct(){var e=Object(a.a)(["\n  width: 700px;\n  padding-top: 10px;\n  border-bottom: 2px solid #aeb8c2;\n  background: rgba(175, 217, 255, 0.44);\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n"]);return ct=function(){return e},e}var it={fetchFavouriteArticle:function(e,t){return function(){var n=Object(E.a)(x.a.mark((function n(a){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="/articles/".concat(e,"/favorite"),n.prev=1,!t){n.next=8;break}return n.next=5,D.delete(r);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,D.post(r);case 10:n.t0=n.sent;case 11:return n.abrupt("return",n.t0);case 14:n.prev=14,n.t1=n.catch(1),a(Z()),a(Z());case 18:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}()},fetchDeleteArticles:function(e){return function(){var t=Object(E.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/articles/".concat(e),t.prev=1,t.next=4,D.delete(a);case 4:n(ae({slug:e})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(re());case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchArticles:oe,authModalStateFailure:ie,fetchFavouriteArticleSuccess:X},ot=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).setFavouriteArticle=Object(E.a)(x.a.mark((function t(){var n,a,r,c,i,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.fetchFavouriteArticle,r=n.fetchFavouriteArticleSuccess,c=n.article,i=c.slug,o=c.favorited,r({slug:i}),t.next=4,a(i,o);case 4:"failed"===e.props.articlesFavouriteFetchingState&&(A(),r({slug:i}));case 6:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props.article,n=t.author.username,a=t.favoritesCount,r=t.favorited,i=t.description,o=t.createdAt,u=t.slug,l=t.tagList,s=t.title,f=t.body,d=this.props,p=d.history,m=d.location,b=d.authModalStateFailure,h=d.fetchDeleteArticles,g=d.fetchArticles,v=l.join(", "),O=localStorage.getItem("username");return c.a.createElement(st,null,c.a.createElement(ft,null,c.a.createElement(pt,{to:"/form-route/articles/".concat(u)},s),c.a.createElement(dt,null,c.a.createElement(St,{username:n,name:O,onClick:C(u,h,g)}),c.a.createElement(At,{username:n,name:O,type:"primary",onClick:_(O,b,p,u),props:this.props},"Edit"))),c.a.createElement(mt,{location:m},i),c.a.createElement(bt,{location:m},f),c.a.createElement(ht,null,c.a.createElement(Et,null,c.a.createElement(gt,null),n),c.a.createElement(wt,null,c.a.createElement(jt,null),(e=o,Object(y.a)(new Date(e),{addSuffix:!0}))),c.a.createElement(yt,null,c.a.createElement(xt,null),v),c.a.createElement(vt,null,c.a.createElement(Ot,{onClick:this.setFavouriteArticle,twoToneColor:r?"#eb2f96":""})," ",a)))}}]),n}(r.Component),ut=Object(u.b)((function(e){return{articlesFavouriteFetchingState:e.articlesFavouriteFetchingState}}),it)(ot),lt=Object(O.f)(ut),st=p.default.article(ct()),ft=p.default.div(rt()),dt=p.default.div(at()),pt=Object(p.default)(l.b)(nt()),mt=p.default.div(tt(),(function(e){return"/form-route/"===e.location.pathname?"none":"block"})),bt=p.default.p(et(),(function(e){return"/form-route/"===e.location.pathname?"none":"block"})),ht=p.default.div($e()),gt=Object(p.default)(He.a)(Ke()),vt=p.default.span(We()),Ot=Object(p.default)(qe.a)(Ze()),jt=Object(p.default)(De.a)(Xe()),xt=Object(p.default)(Me.a)(Je()),Et=p.default.span(Ye()),wt=p.default.span(Qe()),yt=p.default.span(Ne()),St=Object(p.default)(Ve.a)(Ge(),(function(e){return e.name===e.username?"flex":"none"})),At=Object(p.default)(U.a)(Be(),(function(e){return e.name===e.username?"block":"none"}),(function(e){return e.name===e.username?"#1890ff":"inherit"}));function Ct(){var e=Object(a.a)(["\n  display: flex;\n  width: 400px;\n  justify-content: space-between;\n  align-items: center;\n"]);return Ct=function(){return e},e}function kt(){var e=Object(a.a)(["\n  font-size: 16px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return kt=function(){return e},e}function Ft(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return Ft=function(){return e},e}function Tt(){var e=Object(a.a)(["\n  display: flex;\n  height: 220px;\n  max-width: 400px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-around;\n"]);return Tt=function(){return e},e}function _t(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return _t=function(){return e},e}function Ut(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return Ut=function(){return e},e}function Rt(){var e=Object(a.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  width: 100px;\n"]);return Rt=function(){return e},e}function Pt(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 500px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return Pt=function(){return e},e}var Lt={fetchAuthorization:function(e){var t=e.email,n=e.password;return function(){var e=Object(E.a)(x.a.mark((function e(a){var r,c,i,o,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(M()),"/users/login",e.prev=2,e.next=5,D.post("/users/login",{user:{email:t,password:n}});case 5:r=e.sent,c=r.data.user,i=c.token,o=c.username,localStorage.setItem("token",i),localStorage.setItem("username",o),a(V()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=e.t0.response.data.errors["email or password"],a(B({emailOrPassword:u}));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},fetchAuthorizationSuccess:V},zt=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.authorizationState,a=t.history,r=t.emailOrPassword,i=t.fetchAuthorization;return c.a.createElement(L.c,{initialValues:{password:"",email:""},validationSchema:le,onSubmit:function(){var t=Object(E.a)(x.a.mark((function t(n,r){var c,o,u;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.email,o=n.password,u=r.resetForm,t.next=4,i({email:c,password:o});case 4:"finished"===e.props.authorizationState&&(u(),a.push("/form-route/"));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.errors,i=e.touched,o=e.handleChange,u=e.setFieldTouched,l=e.handleSubmit;return c.a.createElement(Ht,null,c.a.createElement(Vt,{onSubmit:l},c.a.createElement(Nt,null,"Email",c.a.createElement(Gt,null,"*"),c.a.createElement(L.a,{onPressEnter:l,onChange:function(e){u("email"),o(e)},value:t.email,name:"email",id:"email",type:"email",component:Dt})),i.email&&a.email||c.a.createElement("div",null,"\xa0"),c.a.createElement(Nt,null,"Password",c.a.createElement(Gt,null,"*"),c.a.createElement(L.a,{onPressEnter:l,onChange:function(e){u("password"),o(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:Mt})),i.password&&a.password||c.a.createElement("div",null,"\xa0"),c.a.createElement(qt,{type:"primary",onClick:l,loading:"request"===n},"Sign in"),"failed"===n?c.a.createElement("div",null,"Email or password ".concat(r)):null,c.a.createElement(Bt,{to:"/form-route/signup"},"Sign up"),c.a.createElement(Bt,{to:"/form-route/"},"Return to Main")))}))}}]),n}(c.a.Component),It=Object(u.b)((function(e){var t=e.authorizationState;return{emailOrPassword:e.fetchAuthorization.errors.emailOrPassword,authorizationState:t}}),Lt)(zt),Ht=p.default.section(Pt()),qt=Object(p.default)(U.a)(Rt()),Dt=Object(p.default)(R.a)(Ut()),Mt=Object(p.default)(R.a.Password)(_t()),Vt=p.default.form(Tt()),Bt=Object(p.default)(l.b)(Ft()),Gt=p.default.span(kt()),Nt=p.default.label(Ct()),Qt=n(442),Yt=n(439);function Jt(){var e=Object(a.a)(["\n  width: 90px;\n  height: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: auto;\n"]);return Jt=function(){return e},e}function Xt(){var e=Object(a.a)(["\n  padding: 0 5px;\n  text-decoration: none;\n  position: fixed;\n  top: 20px;\n  right: 30px;\n"]);return Xt=function(){return e},e}function Zt(){var e=Object(a.a)(["\n  padding: 0 5px;\n"]);return Zt=function(){return e},e}function Wt(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 700px;\n  background-color: rgba(233, 233, 113, 0.6);\n"]);return Wt=function(){return e},e}function Kt(){var e=Object(a.a)(["\n  position: fixed;\n  top: 20px;\n  right: 100px;\n  color: rgba(0, 13, 34, 0.72);\n"]);return Kt=function(){return e},e}function $t(){var e=Object(a.a)(["\n  margin-top: 150px;\n  display: ",";\n"]);return $t=function(){return e},e}function en(){var e=Object(a.a)(["\n  padding: 30px 0;\n"]);return en=function(){return e},e}function tn(){var e=Object(a.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  min-height: 850px;\n  padding-bottom: 30px;\n"]);return tn=function(){return e},e}function nn(){var e=Object(a.a)(["\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  width: 950px;\n\n  border: 1px solid cornflowerblue;\n  border-radius: 10px;\n  padding: 20px;\n  background-color: rgba(216, 236, 251, 0.53);\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return nn=function(){return e},e}var an={fetchAuthorizationSuccess:V,fetchArticles:oe,authModalStateFailure:ie},rn=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("username")},e.renderArticles=function(){return e.props.articles.map((function(e){return c.a.createElement(lt,{key:e.slug,article:e})}))},e.onChange=function(t){(0,e.props.fetchArticles)(t+"0"-10)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.articlesCount,n=e.authModalStateFailure,a=e.history,r=e.articlesFetchingState,i=localStorage.getItem("username");return c.a.createElement(un,null,c.a.createElement(sn,{defaultCurrent:1,pageSize:10,showSizeChanger:!1,total:t,onChange:this.onChange,showTotal:function(e,t){return"".concat(t[1]," of ").concat(e," items")}}),c.a.createElement(pn,null,"For editing, deleting and adding articles you need"," ",c.a.createElement(mn,{to:"/form-route/login"}," Log in")),c.a.createElement(ln,null,c.a.createElement(dn,null,function(){var e=localStorage.getItem("username");return e||c.a.createElement(l.b,{to:"/form-route/signup"},"Sign up")}()),c.a.createElement(bn,{onClick:this.handleLogOut,to:"/form-route/login"},localStorage.getItem("token")?"Log out":"Sign in"),c.a.createElement(fn,{articlesFetchingState:r,size:"large",tip:"Loading..."}),this.renderArticles()),c.a.createElement(hn,{type:"primary",onClick:_(i,n,a,null,"add")},"Add"))}}]),n}(r.Component),cn=Object(u.b)((function(e){var t=e.articles;return{articles:t.articles,articlesCount:t.articlesCount,articlesFetchingState:e.articlesFetchingState}}),an)(rn),on=Object(O.f)(cn),un=p.default.div(nn()),ln=p.default.section(tn()),sn=Object(p.default)(Qt.a)(en()),fn=Object(p.default)(Yt.a)($t(),(function(e){return"success"===e.articlesFetchingState?"none":"block"})),dn=p.default.span(Kt()),pn=p.default.div(Wt()),mn=Object(p.default)(l.b)(Zt()),bn=Object(p.default)(l.b)(Xt()),hn=Object(p.default)(U.a)(Jt());function gn(){var e=Object(a.a)(["\n  display: flex;\n  width: 450px;\n  justify-content: space-between;\n  align-items: center;\n"]);return gn=function(){return e},e}function vn(){var e=Object(a.a)(["\n  font-size: 16px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return vn=function(){return e},e}function On(){var e=Object(a.a)(["\n  text-decoration: none;\n"]);return On=function(){return e},e}function jn(){var e=Object(a.a)(["\n  display: flex;\n  height: 300px;\n  max-width: 550px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-between;\n"]);return jn=function(){return e},e}function xn(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return xn=function(){return e},e}function En(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return En=function(){return e},e}function wn(){var e=Object(a.a)(["\n  margin-top: 10px;\n"]);return wn=function(){return e},e}function yn(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 550px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return yn=function(){return e},e}var Sn,An,Cn,kn,Fn,Tn,_n={fetchRegistration:function(e,t,n){return function(){var a=Object(E.a)(x.a.mark((function a(r){var c,i,o,u;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(G()),"/users",a.prev=2,a.next=5,D.post("/users",{user:{username:e,email:t,password:n}});case 5:r(Q()),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(2),c=a.t0.response.data.errors,i=c.email,o=c.password,u=c.username,r(N({email:i,password:o,username:u,registration:!1}));case 12:case"end":return a.stop()}}),a,null,[[2,8]])})));return function(e){return a.apply(this,arguments)}}()},fetchRegistrationSuccess:Q},Un=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.email,a=t.password,r=t.username,i=t.history,o=t.registrationState,u=t.fetchRegistration;return c.a.createElement(L.c,{initialValues:{password:"",email:"",name:""},validationSchema:se,onSubmit:function(){var t=Object(E.a)(x.a.mark((function t(n,a){var r,c,o,l;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,c=n.email,o=n.password,l=a.resetForm,t.next=4,u(r,c,o);case 4:"finished"===e.props.registrationState&&(l(),i.push("/form-route/login"));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,i=e.errors,u=e.touched,l=e.handleChange,s=e.setFieldTouched,f=e.handleSubmit;return c.a.createElement(Pn,null,c.a.createElement(Hn,{onSubmit:f},c.a.createElement(Mn,null,"Name",c.a.createElement(Dn,null,"*"),c.a.createElement(L.a,{onPressEnter:f,onChange:function(e){s("name"),l(e)},value:t.name,name:"name",id:"name",type:"text",component:zn})),u.name&&i.name||null,r?c.a.createElement("div",{style:{marginLeft:"auto"}},"Name ".concat(r)):null,c.a.createElement(Mn,null,"Email",c.a.createElement(Dn,null,"*"),c.a.createElement(L.a,{onPressEnter:f,onChange:function(e){s("email"),l(e)},value:t.email,name:"email",id:"email",type:"email",component:zn})),u.email&&i.email||null,n?c.a.createElement("div",{style:{marginLeft:"auto"}},"Email ".concat(n)):null,c.a.createElement(Mn,null,"Password",c.a.createElement(Dn,null,"*"),c.a.createElement(L.a,{onPressEnter:f,onChange:function(e){s("password"),l(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:In})),u.password&&i.password||null,a?c.a.createElement("div",{style:{marginLeft:"auto"}},"Password ".concat(a)):null,c.a.createElement(Mn,null,"Repeat Password",c.a.createElement(Dn,null,"*"),c.a.createElement(L.a,{onPressEnter:f,onChange:function(e){s("repeatPassword"),l(e)},value:t.repeatPassword,name:"repeatPassword",visibilityToggle:!0,id:"repeatPassword",type:"password",component:In})),u.repeatPassword&&i.repeatPassword||c.a.createElement("div",null,"\xa0"),c.a.createElement(Ln,{type:"primary",onClick:f,loading:"finished"===o},"Sign up"),c.a.createElement(qn,{to:"/form-route/login"},"Sign in")))}))}}]),n}(c.a.Component),Rn=Object(u.b)((function(e){var t=e.registrationState,n=e.fetchRegistration.errors;return{registrationState:t,email:n.email,password:n.password,username:n.username}}),_n)(Un),Pn=p.default.section(yn()),Ln=Object(p.default)(U.a)(wn()),zn=Object(p.default)(R.a)(En()),In=Object(p.default)(R.a.Password)(xn()),Hn=p.default.form(jn()),qn=Object(p.default)(l.b)(On()),Dn=p.default.span(vn()),Mn=p.default.label(gn()),Vn={fetchArticles:oe,authModalStateSuccess:ce},Bn=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchArticles)()}},{key:"render",value:function(){var e=this.props,t=e.authModalStateSuccess,n=e.articles,a=e.history,r=e.authModalState;return c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{title:"Authorization message",visible:k(null,r),onOk:F(a,t),onCancel:T(t)},"You need ",c.a.createElement(l.b,{to:"/form-route/login"},"Log in")),c.a.createElement(O.c,null,c.a.createElement(O.a,{exact:!0,path:"/form-route/",component:on}),c.a.createElement(O.a,{exact:!0,path:"/form-route/login",component:It}),c.a.createElement(O.a,{exact:!0,path:"/form-route/signup",component:Rn}),c.a.createElement(O.a,{exact:!0,path:"/form-route/add",component:Ae}),c.a.createElement(O.a,{exact:!0,path:"/form-route/articles/:slug",render:function(e){var t=e.match;return c.a.createElement(lt,{article:n.find((function(e){return e.slug===t.params.slug}))})}}),c.a.createElement(O.a,{exact:!0,path:"/form-route/:slug/edit",render:function(e){var t=e.match;return c.a.createElement(Ae,{articles:n,article:n.find((function(e){return e.slug===t.params.slug}))})}})))}}]),n}(c.a.Component),Gn=Object(u.b)((function(e){return{articles:e.articles.articles,authModalState:e.authModalState}}),Vn)(Bn),Nn=Object(O.f)(Gn),Qn=n(26),Yn=n(10),Jn=n(443),Xn=Object(Jn.a)(Object(Yn.a)({},Y,(function(){return"success"})),null),Zn=Object(Jn.a)((Sn={},Object(Yn.a)(Sn,ce,(function(){return"success"})),Object(Yn.a)(Sn,ie,(function(){return"failed"})),Sn),null),Wn=Object(Jn.a)(Object(Yn.a)({},Z,(function(){return"failed"})),null),Kn=Object(Jn.a)((An={},Object(Yn.a)(An,W,(function(){return"request"})),Object(Yn.a)(An,W,(function(){return"finished"})),Object(Yn.a)(An,K,(function(e,t){return t.payload})),An),null),$n=Object(Jn.a)((Cn={},Object(Yn.a)(Cn,ne,(function(){return"success"})),Object(Yn.a)(Cn,ee,(function(){return"finished"})),Object(Yn.a)(Cn,te,(function(e,t){return t.payload})),Cn),null),ea=Object(Jn.a)((kn={},Object(Yn.a)(kn,M,(function(){return"request"})),Object(Yn.a)(kn,B,(function(){return"failed"})),Object(Yn.a)(kn,V,(function(){return"finished"})),kn),null),ta=Object(Jn.a)((Fn={},Object(Yn.a)(Fn,G,(function(){return"request"})),Object(Yn.a)(Fn,N,(function(){return"failed"})),Object(Yn.a)(Fn,Q,(function(){return"finished"})),Fn),null),na=Object(Jn.a)(Object(Yn.a)({},B,(function(e,t){var n=t.payload.emailOrPassword;return Object(Qn.a)(Object(Qn.a)({},e),{},{errors:{emailOrPassword:n}})})),{errors:{email:null,password:null}}),aa=Object(Jn.a)(Object(Yn.a)({},N,(function(e,t){var n=t.payload,a=n.email,r=n.password,c=n.username;return Object(Qn.a)(Object(Qn.a)({},e),{},{errors:{email:a,password:r,username:c}})})),{errors:{email:null,password:null,username:null}}),ra=Object(Jn.a)((Tn={},Object(Yn.a)(Tn,Y,(function(e,t){var n=t.payload,a=n.articles,r=n.articlesCount;return Object(Qn.a)(Object(Qn.a)({},e),{},{articles:a,articlesCount:r})})),Object(Yn.a)(Tn,X,(function(e,t){var n=t.payload.slug,a=e.articles.map((function(e){return e.slug===n?e.favorited?Object(Qn.a)(Object(Qn.a)({},e),{},{favoritesCount:e.favoritesCount-1,favorited:!e.favorited}):Object(Qn.a)(Object(Qn.a)({},e),{},{favoritesCount:e.favoritesCount+1,favorited:!e.favorited}):e}));return Object(Qn.a)(Object(Qn.a)({},e),{},{articles:a})})),Object(Yn.a)(Tn,ae,(function(e,t){var n=t.payload.slug,a=e.articles.filter((function(e){return e.slug!==n}));return Object(Qn.a)(Object(Qn.a)({},e),{},{articles:a})})),Tn),{articlesCount:10,articles:[]}),ca=Object(f.c)({updateArticlesFetchingState:$n,articlesFetchingState:Xn,authorizationState:ea,addArticlesFetchingState:Kn,articlesFavouriteFetchingState:Wn,fetchAuthorization:na,authModalState:Zn,registrationState:ta,fetchRegistration:aa,articles:ra});function ia(){var e=Object(a.a)(["\n\t@font-face {\n\tfont-family: 'Open Sans';\n  font-style: normal;\n  font-weight: 400;\n  src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWJ0bbck.woff2) format('woff2');\n \t}\n \t@font-face {\n \tfont-family: 'Open Sans';\n  font-style: normal;\n  font-weight: 600;\n  src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOVuhpOqc.woff2) format('woff2');\n \t}\n\n*{\n  box-sizing: border-box;\n}\n  body {\n    font-family: \"Open Sans\";\n    font-weight: 400;\n    width: 100%;\n    padding: 50px;\n    background-color: rgba(88,154,255,0.41);\n    font-size: 16px;\n    display:flex;\n    justify-content:center;\n  }\n"]);return ia=function(){return e},e}var oa=Object(p.createGlobalStyle)(ia()),ua=window.__REDUX_DEVTOOLS_EXTENSION__,la=ua&&ua(),sa=Object(f.e)(ca,Object(f.d)(Object(f.a)(s.a),la));o.a.render(c.a.createElement(l.a,null,c.a.createElement(u.a,{store:sa},c.a.createElement(d.Normalize,null),c.a.createElement(oa,null),c.a.createElement(Nn,null))),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.9b468ba6.chunk.js.map