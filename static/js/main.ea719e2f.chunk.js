(this["webpackJsonpform-route"]=this["webpackJsonpform-route"]||[]).push([[0],{255:function(e,t,n){e.exports=n(436)},436:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),o=n.n(r),i=n(7),c=n.n(i),u=(n(260),n(27)),l=n(21),s=n(218),d=n(76),f=n(219),p=n(3),m=n(36),b=n(37),h=n(44),g=n(41),v=n(444),O=n(81),x=n(9),j=n.n(x),w=n(22),E=n(448),y=n(441),S=n(446),k=function(){S.a.open({message:"Message from server",description:"Ooops, something wrong",duration:2})},C=function(e,t,n){return function(){v.a.confirm({icon:o.a.createElement(E.a,null),content:"Are you sure?",onOk:function(){var a=Object(w.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(e);case 2:return a.next=4,n();case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),onCancel:function(){}})}},A=function(e,t){return"failed"===t||e},F=function(e,t){return function(){return t(),A(!1,"failed"),e.push("/form-route/login")}},T=function(e){return function(){return A(!1,"failed"),e()}},I=function(e,t,n,a,r){return function(){return e?"add"===r?n.push("/form-route/add"):n.push("/form-route/".concat(a,"/edit")):t()}},_=n(440),P=n(79),L=n(445),z=n(20),U=n(181),R=n.n(U),H=n(447),M=n(230),D=n.n(M).a.create({baseURL:"https://conduit.productionready.io/api",validateStatus:function(e){return 401===e&&A(!0),e>=200&&e<300}});D.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Token ".concat(t)),e}),(function(e){return Promise.reject(e)})),D.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(localStorage.setItem("token",""),window.location.reload()),Promise.reject(e)}));var q=Object(H.a)("AUTH_FETCH_SUCCESS"),V=Object(H.a)("AUTH_FETCH_FAILURE"),N=Object(H.a)("REG_FETCH_FAILURE"),B=Object(H.a)("REG_FETCH_SUCCESS"),G=Object(H.a)("ARTICLES_FETCH_SUCCESS"),Y=Object(H.a)("ARTICLES_FETCH_FAILURE"),J=Object(H.a)("FAVOURITE_FETCH_SUCCESS"),X=Object(H.a)("FAVOURITE_FETCH_FAILURE"),Z=Object(H.a)("ADD_EDIT_FETCH_SUCCESS"),W=Object(H.a)("ADD_EDIT_FETCH_FAILURE"),K=Object(H.a)("DELETE_FETCH_SUCCESS"),Q=Object(H.a)("DELETE_FETCH_FAILURE"),$=Object(H.a)("AUTH_STATE_SUCCESS"),ee=Object(H.a)("AUTH_STATE_FAILURE"),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(w.a)(j.a.mark((function t(n){var a,r,o,i,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/articles?limit=10&offset=".concat(e),t.prev=1,t.next=4,D.get(a);case 4:r=t.sent,o=r.data,i=o.articles,c=o.articlesCount,n(G({articles:i,articlesCount:c})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(Y());case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},ne=n(29),ae=ne.a().shape({email:ne.c().typeError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445").email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),password:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")}),re=ne.a().shape({name:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),password:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),repeatPassword:ne.c().oneOf([ne.b("password")],"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),email:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e").email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441").typeError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445")}),oe=ne.a().shape({title:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),description:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),body:ne.c().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")});function ie(){var e=Object(a.a)(["\n  position: absolute;\n  top: 0;\n  right: -80px;\n  width: 70px;\n"]);return ie=function(){return e},e}function ce(){var e=Object(a.a)([""]);return ce=function(){return e},e}function ue(){var e=Object(a.a)(["\n  position: relative;\n  display: flex;\n  width: 420px;\n  justify-content: space-between;\n  align-items: baseline;\n"]);return ue=function(){return e},e}function le(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return le=function(){return e},e}function se(){var e=Object(a.a)(["\n  display: flex;\n  max-width: 600px;\n  padding: 30px 0;\n  min-height: 450px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-around;\n"]);return se=function(){return e},e}function de(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return de=function(){return e},e}function fe(){var e=Object(a.a)(["\n  width: 300px;\n  margin-bottom: 10px;\n  display: flex;\n  align-self: flex-start;\n"]);return fe=function(){return e},e}function pe(){var e=Object(a.a)(["\n  font-size: 18px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return pe=function(){return e},e}function me(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return me=function(){return e},e}function be(){var e=Object(a.a)(["\n  width: 100px;\n  text-transform: uppercase;\n"]);return be=function(){return e},e}function he(){var e=Object(a.a)(["\n  width: 600px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return he=function(){return e},e}var ge={fetchAddEditArticles:function(e,t,n){var a=e.title,r=e.description,o=e.body,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var e=Object(w.a)(j.a.mark((function e(c){var u,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={article:{title:a,description:r,body:o,tagList:t}},l="add"===n?"/articles":"/articles/".concat(i),e.prev=2,"add"!==n){e.next=8;break}return e.next=6,D.post(l,u);case 6:e.next=10;break;case 8:return e.next=10,D.put(l,u);case 10:c(Z()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),c(W(e.t0.response.status));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()},fetchArticles:te},ve=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addIdToTagList=function(e){return 0===e.length?[]:e.map((function(e){return{tag:e,id:R()()}}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.addEditArticleState,a=t.fetchAddEditArticles,r=t.fetchArticles,i=t.history,c=this.props.article,u=void 0===c?"":c,l=u.slug,s=void 0===l?"":l,d=u.description,f=void 0===d?"":d,p=u.tagList,m=void 0===p?[]:p,b=u.title,h=void 0===b?"":b,g=u.body,v=void 0===g?"":g;return o.a.createElement(z.c,{initialValues:{title:h,description:f,body:v,tags:this.addIdToTagList(m)},validationSchema:oe,onSubmit:function(){var t=Object(w.a)(j.a.mark((function t(n){var o,c,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.tags.map((function(e){var t=e.tag,a=e.id;return n["tags".concat(a)]&&n["tags".concat(a)]!==t?n["tags".concat(a)]:t})).filter((function(e){return""!==e})),c=u?"edit":"add",t.next=4,a(n,o,c,s);case 4:l=e.props.addEditArticleState,r(),u||"success"!==l||i.push("/form-route/"),u&&"success"===l&&i.go(-1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.errors,r=e.touched,i=e.handleChange,c=e.setFieldValue,l=e.handleSubmit,s=e.isSubmitting,d=e.setFieldTouched;return o.a.createElement(je,null,o.a.createElement(Ce,{onSubmit:l},o.a.createElement(Fe,null,"Title",o.a.createElement(ye,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:r.title&&a.title?"error":"validate",help:r.title&&a.title?a.title:null},o.a.createElement(z.a,{onPressEnter:l,onChange:function(e){d("title"),i(e)},value:t.title,name:"title",id:"title",type:"text",component:Ee}))),o.a.createElement(Fe,null,"Description",o.a.createElement(ye,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:r.description&&a.description?"error":"validate",help:r.description&&a.description?a.description:null},o.a.createElement(z.a,{onPressEnter:l,onChange:function(e){d("description"),i(e)},value:t.description,name:"description",id:"description",type:"text",component:Ee}))),o.a.createElement(Fe,null,"Text",o.a.createElement(ye,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:r.body&&a.body?"error":"validate",help:r.body&&a.body?a.body:null},o.a.createElement(z.a,{autoSize:{minRows:2,maxRows:10},onPressEnter:l,onChange:function(e){d("body"),i(e)},value:t.body,name:"body",id:"body",type:"text",cols:"20",rows:"10",component:ke}))),o.a.createElement(Fe,null,"Tags",o.a.createElement(Te,null,o.a.createElement(z.b,{name:"tags",render:function(e){var n=function(){return c("tag",""),e.unshift({tag:t.tag,id:R()()})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{onChange:i,onPressEnter:n,value:t.tag,name:"tag",id:"tag",type:"text",component:Se}),t.tags.map((function(e){var n=e.tag,a=e.id;return o.a.createElement(z.a,{key:a,defaultValue:n,value:t["tags".concat(a)],onChange:i,id:"tags".concat(a),name:"tags".concat(a),type:"text",component:Se})})),o.a.createElement(Ie,{type:"primary",onClick:n},"Add"))}}))),"authError"===n?o.a.createElement("div",null,"You need to log in"):o.a.createElement("div",null,"\xa0"),o.a.createElement(we,{loading:s,type:"primary",onClick:l},u?"Edit":"Add"),o.a.createElement(Ae,{to:"/form-route/"},"Main")))}))}}]),n}(o.a.Component),Oe=Object(u.b)((function(e){return{addEditArticleState:e.addEditArticleState}}),ge)(ve),xe=Object(O.f)(Oe),je=p.default.section(he()),we=Object(p.default)(P.a)(be()),Ee=Object(p.default)(L.a)(me()),ye=p.default.span(pe()),Se=Object(p.default)(L.a)(fe()),ke=Object(p.default)(L.a.TextArea)(de()),Ce=Object(p.default)(_.a)(se()),Ae=Object(p.default)(l.b)(le()),Fe=p.default.label(ue()),Te=p.default.div(ce()),Ie=Object(p.default)(P.a)(ie()),_e=n(449),Pe=n(450),Le=n(451),ze=n(452),Ue=n(453);function Re(){var e=Object(a.a)(["\n  display: ",";\n  width: 100px;\n  height: 30px;\n  margin-right: 5px;\n  background-color: ",";\n"]);return Re=function(){return e},e}function He(){var e=Object(a.a)(["\n  display: ",";\n  align-items: center;\n  justify-content: center;\n  height: 30px;\n  width: 50px;\n  font-size: 20px;\n"]);return He=function(){return e},e}function Me(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return Me=function(){return e},e}function De(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return De=function(){return e},e}function qe(){var e=Object(a.a)(["\n  display: block;\n  width: 200px;\n  word-wrap: break-word;\n"]);return qe=function(){return e},e}function Ve(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Ve=function(){return e},e}function Ne(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Ne=function(){return e},e}function Be(){var e=Object(a.a)(["\n  font-size: 18px;\n\n  &:active {\n    animation: transform 0.3s ease;\n  }\n\n  @keyframes transform {\n    from {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.3);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n"]);return Be=function(){return e},e}function Ge(){var e=Object(a.a)(["\n  width: 40px;\n  height: 30px;\n"]);return Ge=function(){return e},e}function Ye(){var e=Object(a.a)(["\n  font-size: 18px;\n  margin-right: 5px;\n"]);return Ye=function(){return e},e}function Je(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 700px;\n  padding: 5px 10px;\n  background: rgba(88, 154, 255, 0.1);\n"]);return Je=function(){return e},e}function Xe(){var e=Object(a.a)(["\n  display: ",";\n  width: 700px;\n  padding: 20px 20px;\n  margin: 0;\n  word-wrap: break-word;\n  background: rgba(230, 243, 251, 0.72);\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(a.a)(["\n  display: ",";\n  color: rgba(5, 12, 22, 0.5);\n  width: 650px;\n  padding: 5px 20px;\n  margin: 0;\n  word-wrap: break-word;\n"]);return Ze=function(){return e},e}function We(){var e=Object(a.a)(["\n  color: rgba(5, 12, 22, 0.7);\n  font-weight: 600;\n  width: 530px;\n  padding: 5px 20px;\n  margin: 0;\n  word-wrap: break-word;\n"]);return We=function(){return e},e}function Ke(){var e=Object(a.a)(["\n  display: flex;\n  padding-right: 20px;\n  justify-content: space-between;\n  width: 180px;\n"]);return Ke=function(){return e},e}function Qe(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 700px;\n  border: 1px solid cornflowerblue;\n  background: rgba(88, 154, 255, 0.45);\n"]);return Qe=function(){return e},e}function $e(){var e=Object(a.a)(["\n  width: 700px;\n  padding-top: 10px;\n  border-bottom: 2px solid #aeb8c2;\n  background: rgba(175, 217, 255, 0.44);\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n"]);return $e=function(){return e},e}var et={fetchFavouriteArticle:function(e,t){return function(){var n=Object(w.a)(j.a.mark((function n(a){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="/articles/".concat(e,"/favorite"),n.prev=1,!t){n.next=8;break}return n.next=5,D.delete(r);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,D.post(r);case 10:n.t0=n.sent;case 11:return n.abrupt("return",n.t0);case 14:n.prev=14,n.t1=n.catch(1),a(X());case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}()},fetchDeleteArticles:function(e){return function(){var t=Object(w.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/articles/".concat(e),t.prev=1,t.next=4,D.delete(a);case 4:n(K({slug:e})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(Q());case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchArticles:te,authModalStateFailure:ee,fetchFavouriteArticleSuccess:J},tt=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setFavouriteArticle=function(t,n){return Object(w.a)(j.a.mark((function a(){var r,o,i,c,u,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props,o=r.fetchFavouriteArticle,i=r.fetchFavouriteArticleSuccess,c=r.article,u=c.slug,l=c.favorited,t){a.next=3;break}return a.abrupt("return",n());case 3:return i({slug:u}),a.next=6,o(u,l);case 6:"failed"===e.props.articlesFavouriteFetchingState&&(k(),i({slug:u}));case 8:case"end":return a.stop()}}),a)})))},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props.article,n=t.author.username,a=t.favoritesCount,r=t.favorited,i=t.description,c=t.createdAt,u=t.slug,l=t.tagList,s=t.title,d=t.body,f=this.props,p=f.history,m=f.location,b=f.authModalStateFailure,h=f.fetchDeleteArticles,g=f.fetchArticles,v=l.join(", "),O=localStorage.getItem("username");return o.a.createElement(rt,null,o.a.createElement(ot,null,o.a.createElement(ct,{to:"/form-route/articles/".concat(u)},s),o.a.createElement(it,null,o.a.createElement(Ot,{username:n,name:O,onClick:C(u,h,g)}),o.a.createElement(xt,{username:n,name:O,type:"primary",onClick:I(O,b,p,u),props:this.props},"Edit"))),o.a.createElement(ut,{location:m},i),o.a.createElement(lt,{location:m},d),o.a.createElement(st,null,o.a.createElement(ht,null,o.a.createElement(dt,null),n),o.a.createElement(gt,null,o.a.createElement(mt,null),(e=c,Object(y.a)(new Date(e),{addSuffix:!0}))),o.a.createElement(vt,null,o.a.createElement(bt,null),v),o.a.createElement(ft,null,o.a.createElement(pt,{onClick:this.setFavouriteArticle(O,b),twoToneColor:r?"#eb2f96":""})," ",a)))}}]),n}(r.Component),nt=Object(u.b)((function(e){return{articlesFavouriteFetchingState:e.articlesFavouriteFetchingState}}),et)(tt),at=Object(O.f)(nt),rt=p.default.article($e()),ot=p.default.div(Qe()),it=p.default.div(Ke()),ct=Object(p.default)(l.b)(We()),ut=p.default.div(Ze(),(function(e){return"/form-route/"===e.location.pathname?"none":"block"})),lt=p.default.p(Xe(),(function(e){return"/form-route/"===e.location.pathname?"none":"block"})),st=p.default.div(Je()),dt=Object(p.default)(_e.a)(Ye()),ft=p.default.span(Ge()),pt=Object(p.default)(Pe.a)(Be()),mt=Object(p.default)(Le.a)(Ne()),bt=Object(p.default)(ze.a)(Ve()),ht=p.default.span(qe()),gt=p.default.span(De()),vt=p.default.span(Me()),Ot=Object(p.default)(Ue.a)(He(),(function(e){return e.name===e.username?"flex":"none"})),xt=Object(p.default)(P.a)(Re(),(function(e){return e.name===e.username?"block":"none"}),(function(e){return e.name===e.username?"#1890ff":"inherit"}));function jt(){var e=Object(a.a)(["\n  display: inline-flex;\n  width: 400px;\n  vertical-align: baseline;\n  justify-content: space-between;\n"]);return jt=function(){return e},e}function wt(){var e=Object(a.a)(["\n  font-size: 16px;\n  color: red;\n  margin-right: auto;\n"]);return wt=function(){return e},e}function Et(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 10px;\n"]);return Et=function(){return e},e}function yt(){var e=Object(a.a)(["\n  display: flex;\n  height: 220px;\n  max-width: 400px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-around;\n"]);return yt=function(){return e},e}function St(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return St=function(){return e},e}function kt(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return kt=function(){return e},e}function Ct(){var e=Object(a.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  width: 100px;\n"]);return Ct=function(){return e},e}function At(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 500px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return At=function(){return e},e}var Ft={fetchAuthorization:function(e){var t=e.email,n=e.password;return function(){var e=Object(w.a)(j.a.mark((function e(a){var r,o,i,c,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users/login",e.prev=1,e.next=4,D.post("/users/login",{user:{email:t,password:n}});case 4:r=e.sent,o=r.data.user,i=o.token,c=o.username,localStorage.setItem("token",i),localStorage.setItem("username",c),a(q()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),u=e.t0.response.data.errors["email or password"],a(V({emailOrPassword:u}));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},fetchAuthorizationSuccess:q},Tt=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.emailOrPassword,r=t.fetchAuthorization;return o.a.createElement(z.c,{initialValues:{password:"",email:""},validationSchema:ae,onSubmit:function(){var t=Object(w.a)(j.a.mark((function t(a,o){var i,c,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.email,c=a.password,u=o.resetForm,t.next=4,r({email:i,password:c});case 4:"finished"===e.props.authorization&&(u(),n.push("/form-route/"));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.errors,r=e.touched,i=e.handleChange,c=e.setFieldTouched,u=e.handleSubmit,l=e.isSubmitting;return o.a.createElement(_t,null,o.a.createElement(Ut,{onSubmit:u},o.a.createElement(Mt,null,"Email",o.a.createElement(Ht,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:r.email&&n.email?"error":"validate",help:r.email&&n.email?n.email:null},o.a.createElement(z.a,{onPressEnter:u,onChange:function(e){c("email"),i(e)},value:t.email,name:"email",id:"email",type:"email",component:Lt}))),o.a.createElement(Mt,null,"Password",o.a.createElement(Ht,null,"*"),o.a.createElement(_.a.Item,{validateStatus:r.password&&n.password?"error":"validate",help:r.password&&n.password?n.password:null},o.a.createElement(z.a,{onPressEnter:u,onChange:function(e){c("password"),i(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:zt}))),o.a.createElement(Pt,{type:"primary",onClick:u,loading:l},"Sign in"),a?o.a.createElement("div",{style:{color:"red"}},"Email or password ".concat(a)):null,o.a.createElement(Rt,{to:"/form-route/signup"},"Sign up"),o.a.createElement(Rt,{to:"/form-route/"},"Return to Main")))}))}}]),n}(o.a.Component),It=Object(u.b)((function(e){var t=e.authorization,n=e.authorization.errors,a=(void 0===n?"":n).emailOrPassword;return{emailOrPassword:void 0===a?"":a,authorization:t}}),Ft)(Tt),_t=p.default.section(At()),Pt=Object(p.default)(P.a)(Ct()),Lt=Object(p.default)(L.a)(kt()),zt=Object(p.default)(L.a.Password)(St()),Ut=Object(p.default)(_.a)(yt()),Rt=Object(p.default)(l.b)(Et()),Ht=p.default.span(wt()),Mt=p.default.label(jt()),Dt=n(442),qt=n(439);function Vt(){var e=Object(a.a)(["\n  width: 90px;\n  height: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: auto;\n"]);return Vt=function(){return e},e}function Nt(){var e=Object(a.a)(["\n  padding: 0 5px;\n  text-decoration: none;\n  position: fixed;\n  top: 20px;\n  right: 30px;\n"]);return Nt=function(){return e},e}function Bt(){var e=Object(a.a)(["\n  padding: 0 5px;\n"]);return Bt=function(){return e},e}function Gt(){var e=Object(a.a)(["\n  display: ",";\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 700px;\n  background-color: rgba(233, 233, 113, 0.6);\n"]);return Gt=function(){return e},e}function Yt(){var e=Object(a.a)(["\n  position: fixed;\n  top: 20px;\n  right: 100px;\n  color: rgba(0, 13, 34, 0.72);\n"]);return Yt=function(){return e},e}function Jt(){var e=Object(a.a)(["\n  margin-top: 150px;\n  display: ",";\n"]);return Jt=function(){return e},e}function Xt(){var e=Object(a.a)(["\n  padding: 30px 0;\n"]);return Xt=function(){return e},e}function Zt(){var e=Object(a.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  min-height: 850px;\n  padding-bottom: 30px;\n"]);return Zt=function(){return e},e}function Wt(){var e=Object(a.a)(["\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  width: 950px;\n\n  border: 1px solid cornflowerblue;\n  border-radius: 10px;\n  padding: 20px;\n  background-color: rgba(216, 236, 251, 0.53);\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return Wt=function(){return e},e}var Kt={fetchAuthorizationSuccess:q,fetchArticles:te,authModalStateFailure:ee},Qt=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("username")},e.renderArticles=function(){return e.props.articles.map((function(e){return o.a.createElement(at,{key:e.slug,article:e})}))},e.onChange=function(t){(0,e.props.fetchArticles)(t+"0"-10)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.articlesCount,n=e.authModalStateFailure,a=e.history,r=e.articlesFetchingState,i=localStorage.getItem("username");return o.a.createElement(tn,null,o.a.createElement(an,{defaultCurrent:1,pageSize:10,showSizeChanger:!1,total:t,onChange:this.onChange,showTotal:function(e,t){return"".concat(t[1]," of ").concat(e," items")}}),o.a.createElement(cn,{name:i},"For editing, deleting and adding articles you need"," ",o.a.createElement(un,{to:"/form-route/login"}," Log in")),o.a.createElement(nn,null,o.a.createElement(on,null,function(){var e=localStorage.getItem("username");return e||o.a.createElement(l.b,{to:"/form-route/signup"},"Sign up")}()),o.a.createElement(ln,{onClick:this.handleLogOut,to:"/form-route/login"},localStorage.getItem("token")?"Log out":"Sign in"),o.a.createElement(rn,{articlesFetchingState:r,size:"large",tip:"Loading..."}),this.renderArticles()),o.a.createElement(sn,{type:"primary",onClick:I(i,n,a,null,"add")},"Add"))}}]),n}(r.Component),$t=Object(u.b)((function(e){var t=e.articles;return{articles:t.articles,articlesCount:t.articlesCount,articlesFetchingState:e.articlesFetchingState}}),Kt)(Qt),en=Object(O.f)($t),tn=p.default.div(Wt()),nn=p.default.section(Zt()),an=Object(p.default)(Dt.a)(Xt()),rn=Object(p.default)(qt.a)(Jt(),(function(e){return"success"===e.articlesFetchingState?"none":"block"})),on=p.default.span(Yt()),cn=p.default.div(Gt(),(function(e){return e.name?"none":"flex"})),un=Object(p.default)(l.b)(Bt()),ln=Object(p.default)(l.b)(Nt()),sn=Object(p.default)(P.a)(Vt());function dn(){var e=Object(a.a)(["\n  display: flex;\n  width: 450px;\n  justify-content: space-between;\n"]);return dn=function(){return e},e}function fn(){var e=Object(a.a)(["\n  font-size: 16px;\n  color: red;\n  margin-right: auto;\n  margin-left: 2px;\n"]);return fn=function(){return e},e}function pn(){var e=Object(a.a)(["\n  text-decoration: none;\n  margin-top: 20px;\n"]);return pn=function(){return e},e}function mn(){var e=Object(a.a)(["\n  display: flex;\n  height: 300px;\n  max-width: 550px;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-between;\n"]);return mn=function(){return e},e}function bn(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: center;\n"]);return bn=function(){return e},e}function hn(){var e=Object(a.a)(["\n  width: 300px;\n  display: flex;\n  align-self: flex-start;\n"]);return hn=function(){return e},e}function gn(){var e=Object(a.a)(["\n  margin-top: 10px;\n"]);return gn=function(){return e},e}function vn(){var e=Object(a.a)(["\n  padding: 30px;\n  width: 550px;\n  background-color: rgba(0, 33, 78, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);\n"]);return vn=function(){return e},e}var On,xn,jn,wn,En,yn={fetchRegistration:function(e,t,n){return function(){var a=Object(w.a)(j.a.mark((function a(r){var o,i,c,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"/users",a.prev=1,a.next=4,D.post("/users",{user:{username:e,email:t,password:n}});case 4:r(B()),a.next=12;break;case 7:a.prev=7,a.t0=a.catch(1),o=a.t0.response.data.errors,i=o.email,c=o.password,u=o.username,console.log(i,c,u),r(N({email:i,password:c,username:u}));case 12:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}},Sn=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.email,a=t.password,r=t.username,i=t.history,c=t.fetchRegistration;return o.a.createElement(z.c,{initialValues:{password:"",email:"",name:""},validationSchema:re,onSubmit:function(){var t=Object(w.a)(j.a.mark((function t(n,a){var r,o,u,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,o=n.email,u=n.password,l=a.resetForm,t.next=4,c(r,o,u);case 4:"finished"===e.props.registration&&(l(),i.push("/form-route/login"));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},(function(e){var t=e.values,i=e.errors,c=e.touched,u=e.handleChange,l=e.setFieldTouched,s=e.handleSubmit,d=e.isSubmitting;return o.a.createElement(Cn,null,o.a.createElement(In,{onSubmit:s},o.a.createElement(Ln,null,"Name",o.a.createElement(Pn,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:c.name&&i.name?"error":"validate",help:c.name&&i.name?i.name:null},o.a.createElement(z.a,{onPressEnter:s,onChange:function(e){l("name"),u(e)},value:t.name,name:"name",id:"name",type:"text",component:Fn}))),r?o.a.createElement("div",{style:{marginLeft:"auto",color:"red"}},"Name ".concat(r)):null,o.a.createElement(Ln,null,"Email",o.a.createElement(Pn,null,"*"),o.a.createElement(_.a.Item,{hasFeedback:!0,validateStatus:c.email&&i.email?"error":"validate",help:c.email&&i.email?i.email:null},o.a.createElement(z.a,{onPressEnter:s,onChange:function(e){l("email"),u(e)},value:t.email,name:"email",id:"email",type:"email",component:Fn}))),n?o.a.createElement("div",{style:{marginLeft:"auto",color:"red"}},"Email ".concat(n)):null,o.a.createElement(Ln,null,"Password",o.a.createElement(Pn,null,"*"),o.a.createElement(_.a.Item,{validateStatus:c.password&&i.password?"error":"validate",help:c.password&&i.password?i.password:null},o.a.createElement(z.a,{onPressEnter:s,onChange:function(e){l("password"),u(e)},value:t.password,name:"password",visibilityToggle:!0,id:"password",type:"password",component:Tn}))),a?o.a.createElement("div",{style:{marginLeft:"auto",color:"red"}},"Password ".concat(a)):null,o.a.createElement(Ln,null,"Repeat Password",o.a.createElement(Pn,null,"*"),o.a.createElement(_.a.Item,{validateStatus:c.repeatPassword&&i.repeatPassword?"error":"validate",help:c.repeatPassword&&i.repeatPassword?i.repeatPassword:null},o.a.createElement(z.a,{onPressEnter:s,onChange:function(e){l("repeatPassword"),u(e)},value:t.repeatPassword,name:"repeatPassword",visibilityToggle:!0,id:"repeatPassword",type:"password",component:Tn}))),o.a.createElement(An,{type:"primary",onClick:s,loading:d},"Sign up"),o.a.createElement(_n,{to:"/form-route/login"},"Sign in")))}))}}]),n}(o.a.Component),kn=Object(u.b)((function(e){var t=e.registration.errors,n=void 0===t?"":t,a=n.email,r=void 0===a?"":a,o=n.password,i=void 0===o?"":o,c=n.username;return{email:r,password:i,username:void 0===c?"":c,registration:e.registration}}),yn)(Sn),Cn=p.default.section(vn()),An=Object(p.default)(P.a)(gn()),Fn=Object(p.default)(L.a)(hn()),Tn=Object(p.default)(L.a.Password)(bn()),In=Object(p.default)(_.a)(mn()),_n=Object(p.default)(l.b)(pn()),Pn=p.default.span(fn()),Ln=p.default.label(dn()),zn={fetchArticles:te,authModalStateSuccess:$},Un=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchArticles)()}},{key:"render",value:function(){var e=this.props,t=e.authModalStateSuccess,n=e.articles,a=e.history,r=e.authModalState;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{title:"Authorization message",visible:A(null,r),onOk:F(a,t),onCancel:T(t)},"You need"," ",o.a.createElement(l.b,{onClick:T(t),to:"/form-route/login"},"Log in")),o.a.createElement(O.c,null,o.a.createElement(O.a,{exact:!0,path:"/form-route/",component:en}),o.a.createElement(O.a,{exact:!0,path:"/form-route/login",component:It}),o.a.createElement(O.a,{exact:!0,path:"/form-route/signup",component:kn}),o.a.createElement(O.a,{exact:!0,path:"/form-route/add",component:xe}),o.a.createElement(O.a,{exact:!0,path:"/form-route/articles/:slug",render:function(e){var t=e.match;return o.a.createElement(at,{article:n.find((function(e){return e.slug===t.params.slug}))})}}),o.a.createElement(O.a,{exact:!0,path:"/form-route/:slug/edit",render:function(e){var t=e.match;return o.a.createElement(xe,{articles:n,article:n.find((function(e){return e.slug===t.params.slug}))})}})))}}]),n}(o.a.Component),Rn=Object(u.b)((function(e){return{articles:e.articles.articles,authModalState:e.authModalState}}),zn)(Un),Hn=Object(O.f)(Rn),Mn=n(26),Dn=n(23),qn=n(443),Vn=Object(qn.a)(Object(Dn.a)({},G,(function(){return"success"})),null),Nn=Object(qn.a)((On={},Object(Dn.a)(On,$,(function(){return"success"})),Object(Dn.a)(On,ee,(function(){return"failed"})),On),null),Bn=Object(qn.a)(Object(Dn.a)({},X,(function(){return"failed"})),null),Gn=Object(qn.a)((xn={},Object(Dn.a)(xn,q,(function(){return"finished"})),Object(Dn.a)(xn,V,(function(e,t){var n=t.payload.emailOrPassword;return Object(Mn.a)(Object(Mn.a)({},e),{},{errors:{emailOrPassword:n}})})),xn),{errors:{emailOrPassword:null}}),Yn=Object(qn.a)((jn={},Object(Dn.a)(jn,B,(function(){return"finished"})),Object(Dn.a)(jn,N,(function(e,t){var n=t.payload,a=n.email,r=n.password,o=n.username;return Object(Mn.a)(Object(Mn.a)({},e),{},{errors:{email:a,password:r,username:o}})})),jn),{errors:{email:null,password:null,username:null}}),Jn=Object(qn.a)((wn={},Object(Dn.a)(wn,Z,(function(){return"success"})),Object(Dn.a)(wn,W,(function(){return"authError"})),wn),null),Xn=Object(qn.a)((En={},Object(Dn.a)(En,G,(function(e,t){var n=t.payload,a=n.articles,r=n.articlesCount;return Object(Mn.a)(Object(Mn.a)({},e),{},{articles:a,articlesCount:r})})),Object(Dn.a)(En,J,(function(e,t){var n=t.payload.slug,a=e.articles.map((function(e){return e.slug===n?e.favorited?Object(Mn.a)(Object(Mn.a)({},e),{},{favoritesCount:e.favoritesCount-1,favorited:!e.favorited}):Object(Mn.a)(Object(Mn.a)({},e),{},{favoritesCount:e.favoritesCount+1,favorited:!e.favorited}):e}));return Object(Mn.a)(Object(Mn.a)({},e),{},{articles:a})})),Object(Dn.a)(En,K,(function(e,t){var n=t.payload.slug,a=e.articles.filter((function(e){return e.slug!==n}));return Object(Mn.a)(Object(Mn.a)({},e),{},{articles:a})})),En),{articlesCount:10,articles:[]}),Zn=Object(d.c)({addEditArticleState:Jn,articlesFetchingState:Vn,articlesFavouriteFetchingState:Bn,authorization:Gn,authModalState:Nn,registration:Yn,articles:Xn});function Wn(){var e=Object(a.a)(["\n\t@font-face {\n\tfont-family: 'Open Sans';\n  font-style: normal;\n  font-weight: 400;\n  src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWJ0bbck.woff2) format('woff2');\n \t}\n \t@font-face {\n \tfont-family: 'Open Sans';\n  font-style: normal;\n  font-weight: 600;\n  src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOVuhpOqc.woff2) format('woff2');\n \t}\n\n*{\n  box-sizing: border-box;\n}\n  body {\n    font-family: \"Open Sans\";\n    font-weight: 400;\n    width: 100%;\n    padding: 50px;\n    background-color: rgba(88,154,255,0.41);\n    font-size: 16px;\n    display:flex;\n    justify-content:center;\n  }\n"]);return Wn=function(){return e},e}var Kn=Object(p.createGlobalStyle)(Wn()),Qn=window.__REDUX_DEVTOOLS_EXTENSION__,$n=Qn&&Qn(),ea=Object(d.e)(Zn,Object(d.d)(Object(d.a)(s.a),$n));c.a.render(o.a.createElement(l.a,null,o.a.createElement(u.a,{store:ea},o.a.createElement(f.Normalize,null),o.a.createElement(Kn,null),o.a.createElement(Hn,null))),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.ea719e2f.chunk.js.map